<!DOCTYPE html>
<style>
  canvas {border-style:solid;}
</style>
<h1>Canvas test</h1>
<canvas id="c" height=500 width=700>
</canvas>

<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.0/jquery.min.js?ver=1.4.0"></script>

<script>
var c = document.getElementById("c");
var ctx = c.getContext("2d");
var canvas = document.getElementById('c')

var disc = function(x,y,h,w,dx,dy,ax,ay,falling,c1,ctx){
  this.x=x;
  this.y=y;
  this.h=h;
  this.w=w;
  this.dx=dx;
  this.dy=dy;
  this.ax=ax
  this.ay=ay;
  this.falling=falling;
  this.c1=c1;
  this.ctx=ctx;
}

disc.prototype.draw = function() {
  this.ctx.fillStyle=this.c1;
  this.ctx.fillRect(this.x,this.y,this.w,this.h);
}

disc.prototype.erase = function() {
  this.ctx.clearRect(this.x,this.y,this.w,this.h);
}

d1 = new disc(50,100,20,40,0,0,0,2,true,"#ff0000",ctx);

disc.prototype.collideUn = function(a){
	return ((this.x >= a.x) && (this.x <= (a.x + a.w)) && ((this.y + this.h + this.verticalVelocity) >= a.y));}

disc.prototype.collideR = function(a){
	if ((this.y + this.h >= a.y + a.h) && (this.y <= a.y) && (a.x - this.x < this.horizantalVelocity) && (a.x - this.x > 0)){
	return true;}
	return false;
}
disc.prototype.collideL = function(a){
	if ((this.y + this.h >= a.y + a.h) && (this.y <= a.y) && (this.x - a.x < this.horizantalVelocity) && (this.x - a.x > 0)){
	return true;}
	return false;	
}

$(document).keydown(
	function(e) {
		console.log(e.keyCode);
		if (e.keyCode == 68){
			if(!d1.falling && d1.dx<10){
				d1.ax=1;
			}
		}				
		if (e.keyCode == 65){
			if(!d1.falling && d1.dx>-10){
				d1.ax=-1;
			}
		}
        if (e.keyCode == 87){
			if (d1.dy == 0){
				d1.dy = -25;
				d1.falling=true;
			}
		}
	}
);
          
$(document).keyup(
	function(e) {
		if (e.keyCode == 68 || e.keyCode == 65){
			d1.ax=0;
			d1.dx=0;
         }
    }
);


function animate() {
    d1.erase();
	d1.dx = d1.dx + d1.ax;
	d1.x = d1.x + d1.dx;
	d1.dy = d1.dy + d1.ay;
	d1.y = d1.y + d1.dy;
	if ( (d1.x>=canvas.width - d1.dx && d1.dx > 0) || (d1.dx < 0 && d1.x < d1.dx * -1))  { 
		d1.dx = d1.dx * -1;
	}
	if (d1.y >= canvas.height-d1.h && d1.dy > 0){ 
		d1.dy = 0;
		d1.y = canvas.height-d1.h;
		d1.falling=false;
	}
	d1.draw();
	console.log("aaaaa");
}

$(document).ready(
	function(){
		d1.draw();
		setInterval(animate,20);
	}
);


</script>
