<!DOCTYPE html>
<style>
  canvas {border-style:solid;}
</style>
<h1>Canvas test</h1>
<canvas id="c" height=500 width=700>
</canvas>

<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.0/jquery.min.js?ver=1.4.0"></script>

<script>
var c = document.getElementById("c");
var ctx = c.getContext("2d");

var disc = function(x,y,h,w,c1,c2,ctx){
  this.verticalVelocity = 0;
  this.horizantalVelocity = 5;
  this.x=x;
  this.y=y;
  this.h=h;
  this.w=w;
  this.c1=c1;
  this.c2=c2;
  this.ctx=ctx;
}

disc.prototype.draw = function() {
  this.ctx.fillStyle=this.c1;
  this.ctx.fillRect(this.x,this.y,this.w,this.h/2);
  this.ctx.fillStyle=this.c2;
  this.ctx.fillRect(this.x,this.y+this.h/2,this.w,this.h/2);
}

disc.prototype.erase = function() {
  this.ctx.clearRect(this.x,this.y,this.w,this.h);
}

disc.prototype.moveleft = function() {
 this.erase();
 this.x+=-5;
 this.draw();
}

disc.prototype.moveright = function() {
 this.erase();
 this.x+=5; 
 this.draw();
}
disc.prototype.jump = function(){
   this.verticalVelocity = 5;
   while(this.verticalVelocity > 0){
    for (var i = 0; i< this.verticalVelocity;i++)
    {  this.erase();
       this.y = this.y - 1;
       sleep(10);
       this.draw();
    }
    //this.erase();
    //this.y = this.y - this.verticalVelocity;
    //this.draw();
    this.verticalVelocity -= 1;
}}

disc.prototype.fall = function() {
   

}



disc.prototype.collideUn = function(a){
	if (((this.y + this.height - a.y) <= this.verticalVelocity) && (this.x >= a.x) && (this.x <= (a.x + a.width)))
		{return true;}
	return false;
}

disc.prototype.collideR = function(a){
	if ((this.y + this.height >= a.y + a.height) && (this.y <= a.y) && (a.x - this.x < this.horizantalVelocity) && (a.x - this.x > 0)){
	return true;}
	return false;
}
disc.prototype.collideL = function(a){
	if ((this.y + this.height >= a.y + a.height) && (this.y <= a.y) && (this.x - a.x < this.horizantalVelocity) && (this.x - a.x > 0)){
	return true;}
	return false;	
}

d1 = new disc(100,100,20,40,"#ff0000","#0000ff",ctx);

function sleep(milliseconds) {
  var start = new Date().getTime();
  for (var i = 0; i < 1e7; i++) {
    if ((new Date().getTime() - start) > milliseconds){
      break;
    }
  }
}

$(document).keypress(function(e) {
     if (e.which == 97){
          d1.moveleft();}
     if (e.which == 100){
          d1.moveright();}
     if (e.which == 119){
          d1.jump();
	}
     })

var dx=1;



function animate() {
  d1.erase();
  d1.x = d1.x + dx;
  if ( d1.x>=500 || d1.x < 50)  { dx = dx * -1;}
  d1.draw();
  d1.jump();
}


$(document).ready(function(){
   d1.draw()});


</script>
